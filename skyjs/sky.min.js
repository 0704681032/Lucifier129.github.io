/* sky.js 2014-08-20 */
(function(t,e){function n(e,n,a,i){var r=t.createElement("script");r.charset="function"==typeof a?a():"string"==typeof a?a:"utf-8",r.attachEvent?r.attachEvent("onreadystatechange",function(){var t=r.readyState;(4===t||"complete"===t||"loaded"===t)&&((i?s:s.removeChild(r)).detachEvent("onreadystatechange",arguments.callee),n&&n())}):r.addEventListener&&r.addEventListener("load",function(){(i?s:s.removeChild(r)).removeEventListener("load",arguments.callee,!1),n&&n()},!1),r.src=e,s.appendChild(r)}var a,i,r,o,s=t.getElementsByTagName("head")[0],c=function(){},u={}.toString,l=/\[native code\]/,d={on:function(t,e){var n=u.call(t);if(-1!==n.indexOf("Object")){for(var a in t)a in this||(this[a]=1),"function"==typeof t[a]&&r(this,a,t[a]);return this}return r(this,t,e),this}};l.test(Object.defineProperty)&&l.test(Object.create)?(r=function(t,e,n){var a=t[e];e in t&&delete t[e],Object.defineProperty(t,e,{set:function(i){a=i,n.call(t,e,a)},get:function(){return a}})},i=function(t){var e=Object.create(d);for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}):"onpropertychange"in s&&(o=s.appendChild(t.createElement("model")),r=function(t,e,n){var a=t.callbacks=t.callbacks||{};a[e]=n,t.onpropertychange||(t.onpropertychange=function(t){t=t||window.event;var e=t.propertyName;e in a&&a[e].call(this,e,this[e])})},i=function(e){var n=o.appendChild(t.createElement("obj"));n.on=d.on;for(var a in e)e.hasOwnProperty(a)&&(n[a]=e[a]);return n});var f={},h=1,p=function(t){return t=a.matchConfig(t),t in f},v=function(t){var e=u.call(t);if(-1!==e.indexOf("String"))!p(t)&&(a.imports=[t]);else if(-1!==e.indexOf("Array")){for(var n=t.length-1;n>=0;n--)p(t[n])&&t.splice(n,1);t.length>0&&(a.imports=[t])}},m=function(){h=1,a.count+=1};a=i({config:{},paths:[],callbacks:[],modules:[],uuid:0,parseImports:function(t){var e=u.call(t),n={};return-1!==e.indexOf("Object")?(n.paths=t.paths,n.task=t.task,"require"in t&&v(t.require)):-1!==e.indexOf("Array")&&(n.paths=t[0],-1!==u.call(t[1]).indexOf("Array")||"string"==typeof t[1]?(v(t[1]),n.task=t[2]):n.task=t[1]),n.task="task"in n&&n.task||c,n},matchConfig:function(t){var e=this.config;return"alias"in e&&t in e.alias?t=e.alias[t]:!/http\:|https\:/.test(t)&&"base"in e&&(t=e.base+t),t}});var g={};a.on({config:function(t,e){"preload"in e&&-1!==u.call(e.preload).indexOf("Array")&&(a.imports=[e.preload])},exports:function(){var t;return function(e,n){var a=this,i=a.modules,r=a.uuid,o=a.count,s="function"==typeof n?n():n;if(i[r]=i[r]||[],-1!==u.call(s).indexOf("Object")&&"id"in s&&(g[s.id]=s.module,s=s.module),1===h)t=[s],h+=1;else if(h>1)return 2===h&&(i[r][o]=t),i[r][o].push(s),h+=1,void 0;i[r].push(s)}}(),imports:function(t,e){e=this.parseImports(e);var n=this,a=u.call(e.paths),i=n.paths;if(-1!==a.indexOf("String"))i.push([e.paths]);else{if(-1===a.indexOf("Array"))return;i.push(e.paths)}n.callbacks[i.length-1]=e.task||c,n.loaded&&(n.total=n.paths[n.uuid].length)},loaded:function(t,e){if(e){var n=this;n.paths[n.uuid]&&(n.total=n.paths[n.uuid].length)}},count:function(t,e){var a,i,r=this;e===r.total?(i=r.modules[r.uuid],r.modules[r.uuid]=r.paths[r.uuid]=1,r.callbacks[r.uuid++].apply(window,i||[]),r.loaded=!0):(a=this.matchConfig(r.paths[r.uuid][e]),f[a]=1,n(a,m,r.config.charset,r.config.debug))},total:function(){this.loaded&&(this.count=0,this.loaded=!1)}}),e.module=a,e.exports=g})(document,this);